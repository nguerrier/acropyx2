(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[767],{2023:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(3366),a=n(7462),i=n(7294),o=n(6010),s=n(7192),c=n(1496),u=n(1657),l=n(8979);function d(e){return(0,l.Z)("MuiCardActions",e)}(0,n(6087).Z)("MuiCardActions",["root","spacing"]);var p=n(5893);const f=["disableSpacing","className"],v=(0,c.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,a.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})));var h=i.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:c}=n,l=(0,r.Z)(n,f),h=(0,a.Z)({},n,{disableSpacing:i}),m=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,s.Z)(r,d,t)})(h);return(0,p.jsx)(v,(0,a.Z)({className:(0,o.Z)(m.root,c),ownerState:h,ref:t},l))}))},8445:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(3366),a=n(7462),i=n(7294),o=n(6010),s=n(7192),c=n(5861),u=n(1657),l=n(1496),d=n(8979);function p(e){return(0,d.Z)("MuiCardHeader",e)}var f=(0,n(6087).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),v=n(5893);const h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],m=(0,l.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.Z)({[`& .${f.title}`]:t.title,[`& .${f.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),g=(0,l.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),x=(0,l.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),b=(0,l.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var Z=i.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiCardHeader"}),{action:i,avatar:l,className:d,component:f="div",disableTypography:Z=!1,subheader:j,subheaderTypographyProps:y,title:w,titleTypographyProps:C}=n,P=(0,r.Z)(n,h),S=(0,a.Z)({},n,{component:f,disableTypography:Z}),k=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,t)})(S);let _=w;null==_||_.type===c.Z||Z||(_=(0,v.jsx)(c.Z,(0,a.Z)({variant:l?"body2":"h5",className:k.title,component:"span",display:"block"},C,{children:_})));let N=j;return null==N||N.type===c.Z||Z||(N=(0,v.jsx)(c.Z,(0,a.Z)({variant:l?"body2":"body1",className:k.subheader,color:"text.secondary",component:"span",display:"block"},y,{children:N}))),(0,v.jsxs)(m,(0,a.Z)({className:(0,o.Z)(k.root,d),as:f,ref:t,ownerState:S},P,{children:[l&&(0,v.jsx)(g,{className:k.avatar,ownerState:S,children:l}),(0,v.jsxs)(b,{className:k.content,ownerState:S,children:[_,N]}),i&&(0,v.jsx)(x,{className:k.action,ownerState:S,children:i})]}))}))},7742:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/judges",function(){return n(1153)}])},1194:function(e,t){"use strict";t.Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",bgcolor:"background.paper",boxShadow:24,p:4}},1153:function(e,t,n){"use strict";n.r(t);var r=n(8520),a=n.n(r),i=n(5893),o=n(7294),s=(n(1163),n(4713)),c=n(6886),u=n(5861),l=n(3321),d=n(9964),p=n(666),f=n(2474),v=n(1458),h=n(7357),m=n(6242),g=n(122),x=n(6540),b=n(8445),Z=n(4267),j=n(2023),y=n(9624),w=n(9661),C=n(4117),P=(n(7497),n(9780)),S=n(5148),k=n(9233),_=n(1194);function N(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){N(i,r,a,o,s,"next",e)}function s(e){N(i,r,a,o,s,"throw",e)}o(void 0)}))}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=(0,s.tl)((function(){var e,t,n=I((0,S.z)(),4),r=n[0],N=n[1],T=(n[2],n[3]),A=(0,s.aF)(),R=(A.user,A.authError,A.authIisLoading,(0,o.useState)([])),M=R[0],L=R[1],D=(0,o.useState)([]),H=D[0],X=D[1],J=(0,o.useState)([]),V=J[0],z=J[1],F=(0,o.useState)([]),W=F[0],B=F[1],U=(0,o.useState)(!1),$=U[0],q=U[1],G=(0,o.useState)(!1),K=G[0],Q=G[1],Y=(0,o.useState)(""),ee=Y[0],te=Y[1],ne=(0,o.useState)({}),re=ne[0],ae=ne[1],ie=E(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.t0=I,e.next=4,(0,k.Xv)("/judges",{expect_json:!0});case 4:if(e.t1=e.sent,t=(0,e.t0)(e.t1,3),n=t[0],r=t[1],t[2],!n){e.next=14;break}return L(!1),X(!1),T("Error while retrieving judges list: ".concat(n)),e.abrupt("return");case 14:r=r.map((function(e){return e.delete="delete",e.update="update",e.id=e._id,e})),L(r),X(r),q(!1);case 18:case"end":return e.stop()}}),e)}))),oe=E(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=I,e.next=3,(0,k.Xv)("/judges/levels",{expect_json:!0});case 3:if(e.t1=e.sent,t=(0,e.t0)(e.t1,3),n=t[0],r=t[1],t[2],!n){e.next=12;break}return z(!1),T("Error while retrieving judge levels: ".concat(n)),e.abrupt("return");case 12:z(r);case 13:case"end":return e.stop()}}),e)}))),se=E(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=I,e.next=3,(0,k.Xv)("/pilots",{expect_json:!0});case 3:if(e.t1=e.sent,t=(0,e.t0)(e.t1,3),n=t[0],r=t[1],t[2],!n){e.next=12;break}return B([]),T("Error while retrieving pilots list: ".concat(n)),e.abrupt("return");case 12:B(r);case 13:case"end":return e.stop()}}),e)}))),ce=E(a().mark((function e(t){var n,r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n="/judges/new",r="POST",i=201,re._id&&(n="/judges/".concat(re._id),r="PUT",i=204),e.t0=I,e.next=8,(0,k.Xv)(n,{expected_status:i,method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(re)});case 8:if(e.t1=e.sent,o=(0,e.t0)(e.t1,3),s=o[0],o[1],o[2],!s){e.next=16;break}return re._id?T("error while updating judge ".concat(re._id,": ").concat(s)):T("error while creating new judge: ".concat(s)),e.abrupt("return");case 16:Q(!1),ie();case 18:case"end":return e.stop()}}),e)}))),ue=E(a().mark((function e(t){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.dataset.id,confirm("Are you sure you want to delete Judge ".concat(name," (").concat(n,") ?"))){e.next=3;break}return e.abrupt("return");case 3:return q(!0),e.t0=I,e.next=7,(0,k.Xv)("/judges/".concat(n),{method:"DELETE",expected_status:204});case 7:e.t1=e.sent,i=(0,e.t0)(e.t1,3),o=i[0],i[1],i[2],o?T("Error while deleting Judge ".concat(n,": ").concat(o)):r("Judge ".concat(n," successfully deleted")),ie();case 14:case"end":return e.stop()}}),e)}))),le=E(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(n=t.target.value).normalize("NFD").replace(/[\u0300-\u036f]/g,""),r=new RegExp(n,"i"),i=H.filter((function(e){return e.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(r)})),L(i),N("".concat(i.length," judges filtered over ").concat(H.length));case 6:case"end":return e.stop()}}),e)}))),de=[{id:"name",rewrite:function(e){var t=H.find((function(t){return t.name==e}));if(!t||!t.civlid||t.civlid<=0)return e;var n=W.find((function(e){return e.civlid==t.civlid}));return n?(0,i.jsx)(h.Z,{children:(0,i.jsxs)(g.Z,{href:n.link,target:"_blank",rel:"noopener noreferrer",children:[(0,i.jsx)(w.Z,{alt:e,src:n.photo}),e]})}):e}},{id:"country"},{id:"level"},{id:"civlid"},{id:"update",type:"ACTION",func:function(e){var t=e.target.dataset.id,n=M.find((function(e){return e._id==t}));te("Updating judge ".concat(t)),ae(n),Q(!0)}},{id:"delete",type:"ACTION",func:ue}];return(0,o.useEffect)((function(){ie(),oe(),se()}),[]),$?(0,i.jsxs)(h.Z,{sx:{width:"100%",textAlign:"center"},children:[(0,i.jsx)(v.Z,{}),"Loading"]}):M?(0,i.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsxs)(u.Z,{variant:"h5",children:["Judges",(0,i.jsx)(p.Z,{onClick:ie})]})}),(0,i.jsx)(c.ZP,{item:!0,xs:4,sm:4,children:(0,i.jsx)(f.Z,{fullWidth:!0,id:"outlined-basic",label:"Search judge",variant:"outlined",onChange:le})}),(0,i.jsxs)(c.ZP,{item:!0,xs:8,sm:8,container:!0,children:[(0,i.jsx)(l.Z,{variant:"contained",onClick:function(){te("New judge"),ae({}),Q(!0)},startIcon:(0,i.jsx)(x.Z,{}),children:"new judge"}),(0,i.jsx)(d.Z,{open:K,onClose:function(){return Q(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsx)(m.Z,{sx:_.Z,children:(0,i.jsxs)("form",{onSubmit:ce,children:[(0,i.jsx)(b.Z,{title:ee,titleTypographyProps:{variant:"h6"}}),(0,i.jsx)(Z.Z,{children:(0,i.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsx)(f.Z,{fullWidth:!0,name:"name",label:"Name",placeholder:"Judge name",defaultValue:null!==(e=re.name)&&void 0!==e?e:"",onChange:function(e){re.name=e.target.value,ae(re)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsx)(y.Z,{disablePortal:!0,id:"autocomplete-level",options:V,defaultValue:re.level,renderInput:function(e){return(0,i.jsx)(f.Z,O({},e,{name:"level",label:"Level"}))},onChange:function(e,t){re.level=t,ae(re)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsx)(y.Z,{disablePortal:!0,id:"autocomplete-country",options:P.i,getOptionLabel:function(e){return"".concat(e.name," (").concat(e.code3,")")},defaultValue:P.i.find((function(e){return e.code3.toLowerCase()==re.country})),renderInput:function(e){return(0,i.jsx)(f.Z,O({},e,{name:"country",label:"Country"}))},onChange:function(e,t){re.country=t.code3.toLowerCase(),ae(re)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsx)(f.Z,{fullWidth:!0,name:"civlid",label:"CIVLD ID",placeholder:"CIVL ID (optional)",defaultValue:null!==(t=re.civlid)&&void 0!==t?t:"",onChange:function(e){var t=e.target.value;""==t&&(t=null),re.civlid=t,ae(re)}})})]})}),(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(l.Z,{size:"large",type:"submit",sx:{mr:2},variant:"contained",children:"Submit"}),(0,i.jsx)(l.Z,{size:"large",color:"secondary",variant:"outlined",onClick:function(){return Q(!1)},children:"Cancel"})]})]})})})]}),(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsx)(m.Z,{children:(0,i.jsx)(C.Z,{rows:M,headCells:de,orderById:"name"})})})]}):(T("Empty or invalid data"),"")}))}},function(e){e.O(0,[808,698,109,725,335,774,888,179],(function(){return t=7742,e(e.s=t);var t}));var t=e.O();_N_E=t}]);