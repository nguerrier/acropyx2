(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{2023:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(3366),a=n(7462),i=n(7294),o=n(6010),l=n(7192),c=n(1496),s=n(1657),u=n(8979);function d(e){return(0,u.Z)("MuiCardActions",e)}(0,n(6087).Z)("MuiCardActions",["root","spacing"]);var f=n(5893);const p=["disableSpacing","className"],m=(0,c.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,a.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})));var h=i.forwardRef((function(e,t){const n=(0,s.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:c}=n,u=(0,r.Z)(n,p),h=(0,a.Z)({},n,{disableSpacing:i}),b=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,l.Z)(r,d,t)})(h);return(0,f.jsx)(m,(0,a.Z)({className:(0,o.Z)(b.root,c),ownerState:h,ref:t},u))}))},8445:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(3366),a=n(7462),i=n(7294),o=n(6010),l=n(7192),c=n(5861),s=n(1657),u=n(1496),d=n(8979);function f(e){return(0,d.Z)("MuiCardHeader",e)}var p=(0,n(6087).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),m=n(5893);const h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],b=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.Z)({[`& .${p.title}`]:t.title,[`& .${p.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),v=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),x=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Z=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var g=i.forwardRef((function(e,t){const n=(0,s.Z)({props:e,name:"MuiCardHeader"}),{action:i,avatar:u,className:d,component:p="div",disableTypography:g=!1,subheader:y,subheaderTypographyProps:j,title:w,titleTypographyProps:P}=n,k=(0,r.Z)(n,h),_=(0,a.Z)({},n,{component:p,disableTypography:g}),C=(e=>{const{classes:t}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},f,t)})(_);let S=w;null==S||S.type===c.Z||g||(S=(0,m.jsx)(c.Z,(0,a.Z)({variant:u?"body2":"h5",className:C.title,component:"span",display:"block"},P,{children:S})));let N=y;return null==N||N.type===c.Z||g||(N=(0,m.jsx)(c.Z,(0,a.Z)({variant:u?"body2":"body1",className:C.subheader,color:"text.secondary",component:"span",display:"block"},j,{children:N}))),(0,m.jsxs)(b,(0,a.Z)({className:(0,o.Z)(C.root,d),as:p,ref:t,ownerState:_},k,{children:[u&&(0,m.jsx)(v,{className:C.avatar,ownerState:_,children:u}),(0,m.jsxs)(Z,{className:C.content,ownerState:_,children:[S,N]}),i&&(0,m.jsx)(x,{className:C.action,ownerState:_,children:i})]}))}))},480:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(3366),a=n(7462),i=n(7294),o=n(6010),l=n(7192),c=n(4423),s=n(5861),u=n(8216),d=n(1496),f=n(1657),p=n(8979);function m(e){return(0,p.Z)("MuiFormControlLabel",e)}var h=(0,n(6087).Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),b=n(5704),v=n(5893);const x=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],Z=(0,d.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${h.label}`]:t.label},t.root,t[`labelPlacement${(0,u.Z)(n.labelPlacement)}`]]}})((({theme:e,ownerState:t})=>(0,a.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${h.disabled}`]:{cursor:"default"}},"start"===t.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===t.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===t.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${h.label}`]:{[`&.${h.disabled}`]:{color:e.palette.text.disabled}}})));var g=i.forwardRef((function(e,t){const n=(0,f.Z)({props:e,name:"MuiFormControlLabel"}),{className:d,componentsProps:p={},control:h,disabled:g,disableTypography:y,label:j,labelPlacement:w="end"}=n,P=(0,r.Z)(n,x),k=(0,c.Z)();let _=g;"undefined"===typeof _&&"undefined"!==typeof h.props.disabled&&(_=h.props.disabled),"undefined"===typeof _&&k&&(_=k.disabled);const C={disabled:_};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof h.props[e]&&"undefined"!==typeof n[e]&&(C[e]=n[e])}));const S=(0,b.Z)({props:n,muiFormControl:k,states:["error"]}),N=(0,a.Z)({},n,{disabled:_,label:j,labelPlacement:w,error:S.error}),T=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:a}=e,i={root:["root",n&&"disabled",`labelPlacement${(0,u.Z)(r)}`,a&&"error"],label:["label",n&&"disabled"]};return(0,l.Z)(i,m,t)})(N);return(0,v.jsxs)(Z,(0,a.Z)({className:(0,o.Z)(T.root,d),ownerState:N,ref:t},P,{children:[i.cloneElement(h,C),j.type===s.Z||y?j:(0,v.jsx)(s.Z,(0,a.Z)({component:"span",className:T.label},p.typography,{children:j}))]}))}))},2665:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tricks",function(){return n(280)}])},1194:function(e,t){"use strict";t.Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",bgcolor:"background.paper",boxShadow:24,p:4}},280:function(e,t,n){"use strict";n.r(t);var r=n(8520),a=n.n(r),i=n(5893),o=n(7294),l=(n(1163),n(4713)),c=n(6886),s=n(5861),u=n(3321),d=n(9964),f=n(666),p=n(2474),m=n(1458),h=n(7357),b=n(6242),v=n(6540),x=n(8445),Z=n(4267),g=n(2023),y=n(9624),j=n(5071),w=n(480),P=n(4117),k=(n(7497),n(9780),n(5148)),_=n(9233),C=n(1194);function S(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){S(i,r,a,o,l,"next",e)}function l(e){S(i,r,a,o,l,"throw",e)}o(void 0)}))}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=(0,l.tl)((function(){var e,t,n,r,S,O,R,M,A,L,D=E((0,k.z)(),4),F=D[0],I=D[1],W=(D[2],D[3]),H=(0,l.aF)(),V=(H.user,H.authError,H.authIisLoading,(0,o.useState)([])),$=V[0],B=V[1],X=(0,o.useState)([]),z=X[0],U=X[1],J=(0,o.useState)([]),q=(J[0],J[1]),G=(0,o.useState)([]),K=G[0],Q=G[1],Y=(0,o.useState)(!1),ee=Y[0],te=Y[1],ne=(0,o.useState)(!1),re=ne[0],ae=ne[1],ie=(0,o.useState)(""),oe=ie[0],le=ie[1],ce=(0,o.useState)({}),se=ce[0],ue=ce[1],de=N(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.t0=E,e.next=4,(0,_.Xv)("/tricks",{expect_json:!0});case 4:if(e.t1=e.sent,t=(0,e.t0)(e.t1,3),n=t[0],r=t[1],t[2],!n){e.next=14;break}return B(!1),U(!1),W("Error while retrieving tricks list: ".concat(n)),e.abrupt("return");case 14:r=r.map((function(e){return e.delete="delete",e.update="update",e.id=e._id,e})),B(r),U(r),te(!1);case 18:case"end":return e.stop()}}),e)}))),fe=N(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=E,e.next=3,(0,_.Xv)("/tricks/bonuses",{expect_json:!0});case 3:if(e.t1=e.sent,t=(0,e.t0)(e.t1,3),n=t[0],r=t[1],t[2],!n){e.next=12;break}return q([]),W("Error while retrieving trick available bonusess: ".concat(n)),e.abrupt("return");case 12:q(r);case 13:case"end":return e.stop()}}),e)}))),pe=N(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=E,e.next=3,(0,_.Xv)("/tricks/directions",{expect_json:!0});case 3:if(e.t1=e.sent,t=(0,e.t0)(e.t1,3),n=t[0],r=t[1],t[2],!n){e.next=12;break}return Q([]),W("Error while retrieving trick available directions: ".concat(n)),e.abrupt("return");case 12:r=r.map((function(e){return e.name})),Q(r);case 14:case"end":return e.stop()}}),e)}))),me=N(a().mark((function e(t){var n,r,i,o,l,c,s,u,d,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n="/tricks/new",r="POST",i=201,se._id&&(n="/tricks/".concat(se._id),r="PUT",i=204),se.directions=null!==(o=se.directions)&&void 0!==o?o:[],se.bonuses=null!==(l=se.bonuses)&&void 0!==l?l:[],se.solo=null===(c=se.solo)||void 0===c||c,se.synchro=null===(s=se.synchro)||void 0===s||s,se.repeatable=null!==(u=se.repeatable)&&void 0!==u&&u,e.t0=E,e.next=18,(0,_.Xv)(n,{expected_status:i,method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});case 18:if(e.t1=e.sent,d=(0,e.t0)(e.t1,3),f=d[0],d[1],d[2],!f){e.next=26;break}return se._id?W("error while updating trick ".concat(se._id,": ").concat(f)):W("error while creating new trick: ".concat(f)),e.abrupt("return");case 26:ae(!1),de();case 28:case"end":return e.stop()}}),e)}))),he=N(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.dataset.id,confirm("Are you sure you want to delete Trick ".concat(name," (").concat(n,") ?"))){e.next=3;break}return e.abrupt("return");case 3:return te(!0),e.t0=E,e.next=7,(0,_.Xv)("/tricks/".concat(n),{method:"DELETE",expected_status:204});case 7:e.t1=e.sent,r=(0,e.t0)(e.t1,3),i=r[0],r[1],r[2],i?W("Error while deleting Trick ".concat(n,": ").concat(i)):F("Trick ".concat(n," successfully deleted")),de();case 14:case"end":return e.stop()}}),e)}))),be=N(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(n=t.target.value).normalize("NFD").replace(/[\u0300-\u036f]/g,""),r=new RegExp(n,"i"),i=z.filter((function(e){return e.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(r)||e.acronym.match(r)})),B(i),I("".concat(i.length," tricks filtered over ").concat(z.length));case 6:case"end":return e.stop()}}),e)}))),ve=[{id:"name"},{id:"acronym"},{id:"directions",rewrite:function(e){return e.join(", ")}},{id:"technical_coefficient",numeric:!0},{id:"solo",type:"BOOLEAN"},{id:"repeatable",type:"BOOLEAN"},{id:"bonuses",rewrite:function(e){return e.map((function(e){return"".concat(e.name," (").concat(e.bonus,")")})).join(", ")}},{id:"synchro",type:"BOOLEAN"},{id:"first_maneuver",numeric:!0},{id:"no_first_maneuver",numeric:!0},{id:"last_maneuver",numeric:!0},{id:"no_last_maneuver",numeric:!0},{id:"update",type:"ACTION",func:function(e){var t=e.target.dataset.id,n=$.find((function(e){return e._id==t}));le("Updating trick ".concat(t)),ue(n),ae(!0)}},{id:"delete",type:"ACTION",func:he}];return(0,o.useEffect)((function(){de(),fe(),pe()}),[]),ee?(0,i.jsxs)(h.Z,{sx:{width:"100%",textAlign:"center"},children:[(0,i.jsx)(m.Z,{}),"Loading"]}):$?(0,i.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsxs)(s.Z,{variant:"h5",children:["Tricks",(0,i.jsx)(f.Z,{onClick:de})]})}),(0,i.jsx)(c.ZP,{item:!0,xs:4,sm:4,children:(0,i.jsx)(p.Z,{fullWidth:!0,id:"outlined-basic",label:"Search trick",variant:"outlined",onChange:be})}),(0,i.jsxs)(c.ZP,{item:!0,xs:8,sm:8,container:!0,children:[(0,i.jsx)(u.Z,{variant:"contained",onClick:function(){le("New trick"),ue({}),ae(!0)},startIcon:(0,i.jsx)(v.Z,{}),children:"new trick"}),(0,i.jsx)(d.Z,{open:re,onClose:function(){return ae(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsx)(b.Z,{sx:C.Z,children:(0,i.jsxs)("form",{onSubmit:me,children:[(0,i.jsx)(x.Z,{title:oe,titleTypographyProps:{variant:"h6"}}),(0,i.jsx)(Z.Z,{children:(0,i.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,i.jsx)(c.ZP,{item:!0,xs:6,children:(0,i.jsx)(p.Z,{fullWidth:!0,name:"name",label:"Name",placeholder:"Trick name",defaultValue:null!==(e=se.name)&&void 0!==e?e:"",onChange:function(e){se.name=e.target.value,ue(se)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:6,children:(0,i.jsx)(p.Z,{fullWidth:!0,name:"acronym",label:"Acronym",placeholder:"Trick Acronym",defaultValue:null!==(t=se.acronym)&&void 0!==t?t:"",onChange:function(e){se.acronym=e.target.value,ue(se)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:6,children:(0,i.jsx)(y.Z,{disablePortal:!0,id:"autocomplete-directions",multiple:!0,options:K,defaultValue:se.directions,renderInput:function(e){return(0,i.jsx)(p.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}({},e,{name:"directions",label:"Directions"}))},onChange:function(e,t){se.directions=t,ue(se)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:6,children:"Bonuses ##TODO##"}),(0,i.jsx)(c.ZP,{item:!0,xs:4,children:(0,i.jsx)(w.Z,{control:(0,i.jsx)(j.Z,{defaultChecked:null===(n=se.solo)||void 0===n||n,onChange:function(e){se.solo=e.target.checked,ue(se)}}),label:"Solo ?"})}),(0,i.jsx)(c.ZP,{item:!0,xs:4,children:(0,i.jsx)(w.Z,{control:(0,i.jsx)(j.Z,{defaultChecked:null===(r=se.synchro)||void 0===r||r,onChange:function(e){se.synchro=e.target.checked,ue(se)}}),label:"Synchro ?"})}),(0,i.jsx)(c.ZP,{item:!0,xs:4,children:(0,i.jsx)(w.Z,{control:(0,i.jsx)(j.Z,{defaultChecked:null!==(S=se.repeatable)&&void 0!==S&&S,onChange:function(e){se.repeatable=e.target.checked,ue(se)}}),label:"Repeatable ?"})}),(0,i.jsx)(c.ZP,{item:!0,xs:6,children:(0,i.jsx)(p.Z,{fullWidth:!0,name:"technical_coefficient",label:"Technical Coefficient",placeholder:"Technical Coefficient",defaultValue:null!==(O=se.technical_coefficient)&&void 0!==O?O:"",onChange:function(e){se.technical_coefficient=e.target.value,ue(se)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:6,children:"free space"}),(0,i.jsx)(c.ZP,{item:!0,xs:3,children:(0,i.jsx)(p.Z,{fullWidth:!0,name:"first_maneuver",label:"First Maneuver",type:"Number",defaultValue:null!==(R=se.first_maneuver)&&void 0!==R?R:0,onChange:function(e){se.first_maneuver=e.target.value,ue(se)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:3,children:(0,i.jsx)(p.Z,{fullWidth:!0,name:"no_first_maneuver",label:"No First Maneuver",type:"Number",defaultValue:null!==(M=se.no_first_maneuver)&&void 0!==M?M:0,onChange:function(e){se.no_first_maneuver=e.target.value,ue(se)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:3,children:(0,i.jsx)(p.Z,{fullWidth:!0,name:"last_maneuver",label:"Last Maneuver",type:"Number",defaultValue:null!==(A=se.last_maneuver)&&void 0!==A?A:0,onChange:function(e){se.last_maneuver=e.target.value,ue(se)}})}),(0,i.jsx)(c.ZP,{item:!0,xs:3,children:(0,i.jsx)(p.Z,{fullWidth:!0,name:"no_last_maneuver",label:"No Last Maneuver",type:"Number",defaultValue:null!==(L=se.no_last_manoeuver)&&void 0!==L?L:0,onChange:function(e){se.no_last_maneuver=e.target.value,ue(se)}})})]})}),(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(u.Z,{size:"large",type:"submit",sx:{mr:2},variant:"contained",children:"Submit"}),(0,i.jsx)(u.Z,{size:"large",color:"secondary",variant:"outlined",onClick:function(){return ae(!1)},children:"Cancel"})]})]})})})]}),(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsx)(b.Z,{children:(0,i.jsx)(P.Z,{rows:$,headCells:ve,orderById:"technical_coefficient"})})})]}):(W("Empty or invalid data"),"")}))}},function(e){e.O(0,[808,698,109,725,335,774,888,179],(function(){return t=2665,e(e.s=t);var t}));var t=e.O();_N_E=t}]);